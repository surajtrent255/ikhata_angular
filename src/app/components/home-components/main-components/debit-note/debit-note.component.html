<main id="main" class="main overflow-auto">
  <div class="pagetitle">
    <h1>Debit Note</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a routerLink="/home/dashboard">Home</a>
        </li>
        <li class="breadcrumb-item active">debit-note</li>
      </ol>
    </nav>
  </div>

  <section class="section">
    <div class="card">
      <div class="card-body">
        <div class="text-center mt-2 mb-2">
          <h3>Create Debit Note</h3>
          <hr class="border-2 mb-2" />
        </div>

        <div class="mt-2 d-flex">
          <span class="mt-2 pe-2"> S N: </span>
          <div class="col-md-2">
            <input
              type="number"
              name="SN"
              #topic="ngModel"
              [ngModel]="serialNumber"
              disabled
              class="form-control"
            />
          </div>
        </div>

        <div class="d-flex float-end">
          <span class="mt-2 pe-2"> Date </span>
          <div class="col-md-8">
            <input type="text" class="form-control" disabled [ngModel]="date" />
          </div>
        </div>

        <div class="mt-2 d-flex">
          <span class="mt-2 pe-2"> Bill No: </span>
          <div class="col-md-2">
            <input
              type="number"
              class="form-control"
              name="billNo"
              [(ngModel)]="billNo"
              (keyup.enter)="onEnter($event)"
            />
          </div>
        </div>

        <p>VAT No: {{ PurchaseBillDetails.purchaseBillDTO.sellerPan }}</p>
        <p>
          Receiver Name: {{ PurchaseBillDetails.purchaseBillDTO.sellerName }}
        </p>
        <p>
          Receiver Address:
          {{ PurchaseBillDetails.purchaseBillDTO.sellerAddress }}
        </p>
      </div>
      <div>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Select</th>
              <th>Product Name</th>
              <th>Debit Reason</th>
              <th>QTY</th>
              <th>Discount</th>
              <th>Debit Amount</th>
              <th>Tax Amount</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody *ngFor="let data of productDetails" id="prodTable">
            <tr>
              <td>
                <input
                  type="checkbox"
                  class="form-check-input"
                  (change)="
                    selectedProduct(
                      $event,
                      data,
                      PurchaseBillDetails.purchaseBillDTO.fiscalYear
                    )
                  "
                />
              </td>
              <td>{{ data.productName }}</td>
              <td>
                <input
                  [(ngModel)]="data.debitReason"
                  class="form-control"
                  type="text"
                />
              </td>
              <td>
                <input
                  [(ngModel)]="data.qty"
                  type="number"
                  class="form-control"
                />
              </td>
              <td>{{ data.discountPerUnit }}</td>
              <td>{{ data.rate }}</td>
              <td>{{ data.rate * (data.taxRate / 100) }}</td>
              <td>
                <span>{{
                  data.qty * (data.rate + (data.rate * data.taxRate) / 100)
                }}</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div style="display: flex">
        <button
          type="submit"
          (click)="onSubmit()"
          class="btn btn-success border-rad"
        >
          Submit
        </button>

        <a
          class="btn btn-secondary"
          routerLink="/home/debitnote/debitNoteList"
          style="margin-left: 5px"
        >
          Cancel
        </a>
      </div>
    </div>
  </section>
</main>
