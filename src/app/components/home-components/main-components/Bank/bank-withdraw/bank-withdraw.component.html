<main id="main" class="main overflow-auto">
  <div class="pagetitle">
    <h1>Bank Withdraw</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a routerLink="/home/dashboard">Home</a>
        </li>
        <li class="breadcrumb-item active">Bank</li>
        <li class="breadcrumb-item active">WithDraw</li>
      </ol>
    </nav>
  </div>

  <section class="section">
    <div class="row">
      <div class="col-lg-12">
        <div class="card">
          <div class="card-body">
            <div class="mt-2 mb-2">
              <h5 class="card-title">Bank Withdraw Table</h5>
              <hr class="border-2 mb-2" />
            </div>

            <div class="d-flex justify-content-between">
              <div class="col-4 mt-2">
                <div class="input-group rounded">
                  <input
                    type="search"
                    class="form-control rounded"
                    placeholder="Search"
                    name="searchInput"
                    aria-label="Search"
                    aria-describedby="search-addon"
                  />
                  <span class="input-group-text border-0" id="search-addon">
                    <i class="fas fa-search"></i>
                  </span>
                  <a
                    style="cursor: pointer; margin-left: 6px"
                    class="pe-auto mt-1 ml-2 text-decoration-underline"
                  >
                    clear Search</a
                  >
                </div>
              </div>

              <div class="col-4 mt-2">
                <div>
                  <a
                    *ngIf="isAccountant || isMaster"
                    style="cursor: pointer"
                    (click)="onCreate()"
                  >
                    <img src="../../../../../../assets/img/createProduct.png" />
                    <span> Create Bank Withdraw</span>
                  </a>
                </div>
              </div>

              <nav style="margin-top: 2px" aria-label="Page navigation ">
                <ul class="pagination">
                  <li class="page-item">
                    <a class="page-link pe-auto" aria-label="Previous">
                      <span aria-hidden="true">&laquo;</span>
                    </a>
                  </li>
                  <li class="page-item">
                    <a class="page-link">1</a>
                  </li>
                  <li class="page-item">
                    <a class="page-link pe-auto" aria-label="Next">
                      <span aria-hidden="true">&raquo;</span>
                    </a>
                  </li>
                </ul>
              </nav>
            </div>

            <table class="table table-bordered table-striped">
              <thead>
                <tr>
                  <th>Bank Name</th>
                  <th>WithDraw Amount</th>
                  <th>WithDraw Type</th>
                  <th>Cheque Number</th>
                  <th>date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let withdraw of withdraw">
                  <td>
                    <!-- <span *ngFor="let bl of bankList">
                      <b *ngIf="bl.id === withdraw.bankId">{{
                        bl.name
                      }}-> {{withdraw.bankId}}</b></span
                    > -->
                    <span>{{withdraw.bankName}}</span>
                  </td>
                  <td>{{ withdraw.withdrawAmount }}</td>
                  <td>
                    <span *ngFor="let wt of withDrawTypes">
                      <span
                        *ngIf="checkWithDrawType(wt.id, withdraw.withdrawType)"
                        >{{ wt.name }}</span
                      ></span
                    >
                  </td>

                  <td>{{ withdraw.chequeNumber }}</td>
                  <td>{{ withdraw.withdrawDate | date : "mediumDate" }}</td>
                  <td class="last-child">
                    <div *ngIf="isAccountant || isMaster">
                      <a
                        id="editWithDraw"
                        (click)="editBankWithdraw(withdraw.withdrawId)"
                      >
                        <img
                          src="../../../assets/resources/images/editRow.png" title="Edit"
                        />
                      </a>
                      <a
                        (click)="
                          deletewithdraw(withdraw.branchId, withdraw.withdrawId)
                        "
                        class="deleteRowLink deleteGroupCombo"
                      >
                        <img
                          src="../../../assets/resources/images/deleteRow.png" title="Delete"
                        />
                      </a>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
<ngx-smart-modal
  identifier="editBankWithDrawPopup"
  id="editBankWithDrawpopup"
  [closable]="false"
  (mousedown)="CommonService.handleMouseDown($event)"
  (mousemove)="CommonService.elementDrag($event)"
  (mouseup)="CommonService.clear()"
>
  <app-bank-withdraw-edit
    [withDrawId]="bankWithDrawUpdateId"
  ></app-bank-withdraw-edit
></ngx-smart-modal>

<ngx-smart-modal
  identifier="createBankWithDrawPopup"
  id="createBankWithDrawpopup"
  [closable]="false"
  (mousedown)="CommonService.handleMouseDown($event)"
  (mousemove)="CommonService.elementDrag($event)"
  (mouseup)="CommonService.clear()"
>
  <div class="custom-modal-header">
    <h5 class="custom-modal-title">Create Bank Withdraw</h5>
    <button type="button" class="btn-close" (click)="cancel()"></button>
  </div>
  <div class="row mt-4">
    <div class="col-md-12">
      <form
        #createWithdrawForm="ngForm"
        name="createWithdrawForm"
        id="createWithdrawForm"
        (ngSubmit)="creatwithdraw(createWithdrawForm)"
        class="mt-4"
      >
        <table class="table table-stripped">
          <tr>
            <td class="col-md-3">
              Bank Name :<span class="mandatorySign">*</span>
            </td>
            <td class="col-md-6">
              <!-- <ng-autocomplete
                [data]="banks"
                [searchKeyword]="keyword"
                placeholder="Select Bank"
                (selected)="selectEvent($event)"
                [itemTemplate]="itemTemplate"
                [notFoundTemplate]="notFoundTemplate"
              >
              </ng-autocomplete>

              <ng-template #itemTemplate let-item>
                <a [innerHTML]="item"></a>
              </ng-template>

              <ng-template #notFoundTemplate let-notFound>
                <div [innerHTML]="notFound"></div>
              </ng-template> -->
              <select
              class="form-control form-select"
              name="bankId"
              id="bankId"
              name="bankId"
              #bankId="ngModel"
              [(ngModel)]="objwidthdraw.bankId"
              [class.is-invalid]="bankId.invalid && bankId.touched"
            >
              <option value="" selected disabled>select Bank Name</option>
              <option *ngFor="let option of banks" [value]="option.bankId">
                <span *ngFor="let bl of bankList">
                  <b *ngIf="bl.id === option.bankTypeId">{{ bl.name }}</b></span
                >
              </option>
            </select>
            </td>
          </tr>
          <tr>
            <td class="col-md-3">
              Withdraw Amount:<span class="mandatorySign">*</span>
            </td>
            <td class="col-md-6">
              <input
                type="number"
                name="withdrawAmount"
                [(ngModel)]="objwidthdraw.withdrawAmount"
                required
                #withdrawAmount="ngModel"
                [class.is-invalid]="
                  withdrawAmount.invalid && withdrawAmount.touched
                "
                class="form-control"
                id="withdrawAmount"
              />
            </td>
            <td class="col-md-3">
              <small
                class="text-danger"
                [class.d-none]="
                  withdrawAmount.valid || withdrawAmount.untouched
                "
                >invalid withdrawAmount</small
              >
            </td>`
          </tr>
          <tr>
            <td class="col-md-3">
              Withdraw Type:<span class="mandatorySign">*</span>
            </td>
            <td class="col-md-6">
              <select
                name="withdrawType"
                id="withdrawType"
                [(ngModel)]="objwidthdraw.withdrawType"
                class="form-select"
              >
                <option value="{{ t.id }}" *ngFor="let t of withDrawTypes">
                  {{ t.name }}
                </option>
              </select>
            </td>
          </tr>
          <tr>
            <td class="col-md-3">Cheque Number:</td>
            <td class="col-md-6">
              <input
                name="chequeNumber"
                title="check your stock "
                [(ngModel)]="objwidthdraw.chequeNumber"
                #chequeNumber="ngModel"
                class="form-control"
                id="chequeNumber"
              />
            </td>
          </tr>
          <tr>
            <td class="col-md-3">Date:</td>
            <td class="col-md-6">
              <div style="padding: 0px">
                <input
                  type="text"
                  id="nepali-datepicker"
                  placeholder="Select  Date"
                  class="form-control"
                />

                <input
                  disabled
                  type="text"
                  id="AdDate"
                  disabled
                  class="form-control"
                />
              </div>
            </td>
          </tr>
        </table>
        <div class="custom-modal-footer mt-4">
          <input
            type="submit"
            class="btn btn-success"
            id="submitCategoryPrd"
            value="Add withdraw"
            [disabled]="createWithdrawForm.form.invalid"
          />

          <input
            type="button"
            value="Cancel"
            class="btn btn-secondary"
            (click)="cancel()"
          />
        </div>
      </form>
    </div>
  </div>
</ngx-smart-modal>
